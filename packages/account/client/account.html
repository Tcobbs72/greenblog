<template name="account">
    <div class="account-container">
        <div class="row">
            <div class="col-md-24 col-sm-36 col-xs-36 col-xxs-36 account-posts">
                {{#if myProfile}}
                    {{> newPost}}
                {{/if}}
                {{#each posts}}
                    {{> blogPost}}
                {{/each}}
            </div>
            <div class="col-md-11 col-md-offset-1 col-sm-36 col-xs-36 col-xxs-36 col-sm-offset-0" style="overflow-x: hidden">
                <div class="col-md-17 col-sm-9 col-xs-18 col-xxs-18" style="padding: 0; overflow-x: hidden">
                    <h2 class="text-center section-header">Subscribers</h2>
                    <div class="subscribe-container border-left">
                        {{#each subscribers}}
                            <div class="subscribe-user-container">
                                <a href="/account/{{username}}" class="subscriber-user">{{username}}</a>
                                {{#if myProfile}}
                                    <a href="#" class="block-user" data-username="{{username}}"><i class="fa fa-ban"></i></a>
                                {{/if}}
                            </div>
                        {{/each}}
                    </div>
                </div>
                <div class="col-md-17 col-md-offset-2 col-sm-9 col-sm-offset-0 col-xs-18 col-xs-offset-0 col-xxs-18 col-xxs-offset-0" style="padding: 0; overflow-x: hidden">
                    <h2 class="text-center section-header">Subscribed</h2>
                    <div class="subscribe-container border-left">
                        {{#with account}}
                            {{#each profile.subscribed}}
                                <div class="subscribe-user-container">
                                    <a href="/account/{{this}}" class="subscribed-user">{{this}}</a>
                                    {{#if myProfile}}
                                        <a href="#" class="unsubscribe-user" data-username="{{this}}"><i class="fa fa-times"></i></a>
                                    {{/if}}
                                </div>
                            {{/each}}
                        {{/with}}
                    </div>
                </div>
                {{#if myProfile}}
                    <div class="col-md-17 col-sm-9 col-xs-18 col-xxs-18" style="padding: 0; overflow-x: hidden">
                        <h2 class="text-center section-header">Blocked</h2>
                        <div class="blocked-container border-left">
                            {{#with account}}
                                {{#each profile.blocked}}
                                    <div class="blocked-user-container">
                                        <span class="blocked-user">{{this}}</span>
                                        <a href="#" class="unblock-user" data-username="{{this}}"><i class="fa fa-undo"></i></a>
                                    </div>
                                {{/each}}
                            {{/with}}
                        </div>
                    </div>
                    <div class="col-md-17 col-md-offset-2 col-sm-9 col-sm-offset-0 col-xs-18 col-xs-offset-0 col-xxs-18 col-xxs-offset-0" style="padding: 0; overflow-x: hidden">
                        <h2 class="text-center section-header">Notifications
                            {{#if numNotifications}}
                                <span class="badge notification-badge">{{numNotifications}}</span>
                            {{/if}}
                        </h2>
                        <div class="notification-container border-left">
                            {{#each notifications}}
                                {{> notification}}
                            {{/each}}
                            {{#if moreNotifications}}
                                {{#if showingMoreNotifications}}
                                    <div class="text-center"><a href="#" class="btn hideNotifications">Hide</a></div>
                                {{else}}
                                    <div class="text-center"><a href="#" class="btn loadNotifications">Load More</a></div>
                                {{/if}}
                            {{/if}}
                        </div>
                    </div>
                {{/if}}
            </div>
        </div>
    </div>
</template>

<template name="notification">
    <div class="row notification {{#unless viewed}}unviewed{{/unless}}">
        <div class="row notification-header">
            <b>{{formatDate date}}</b>
            {{#unless viewed}}
                <div class="pull-right">
                    <a href="#" class="view-notification" data-id="{{_id}}"><i class="fa fa-eye"></i></a>
                </div>
            {{/unless}}
        </div>
        <span class="notification-text">{{text}}</span>
    </div>
</template>